<div>
  <!-- Header con botón de crear -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h6 class="mb-0">Medios de Verificación</h6>
    {% if user.role_id == 10 %}
    <a class="btn btn-sm btn-primary add-verification" href="/acciones/crear-verificacion"> <i class="bi bi-plus-lg"></i> Crear </a>
    {% endif %}
  </div>

  <!-- Lista de medios de verificación -->
  <ul class="verification-list list-group list-group-flush">
    {% for verificacion in verificaciones %}
    <li class="list-group-item">
      <span>{{ verificacion.nombre }}</span>
      <a href="{{ verificacion.url }}">{{ verificacion.url }}</a>
      <span class="verification-actions">
        {% if user.role_id == 10 %}
        <a class="btn btn-sm btn-warning edit-verification" href="/acciones/editar-verificacion/{{ verificacion.verificacion_id }}">Editar</a>
        <button class="btn btn-sm btn-danger delete-verification" data-verificacion-id="{{ verificacion.verificacion_id }}" data-verificacion-nombre="{{ verificacion.nombre }}">
          <i class="bi bi-trash"></i> Eliminar
        </button>
        {% endif %}
      </span>
    </li>
    {% endfor %}
  </ul>

  <form id="deleteVerificacionForm" method="POST" style="display: none">{% csrf_token %}</form>
</div>

<script>
  document.addEventListener("click", function (e) {
    const deleteBtn = e.target.closest(".delete-verification");

    if (deleteBtn) {
      const verificacionId = deleteBtn.getAttribute("data-verificacion-id");
      const verificacionNombre = deleteBtn.getAttribute("data-verificacion-nombre");

      // Confirmación
      if (confirm(`¿Seguro que quieres eliminar "${verificacionNombre}"?`)) {
        deleteVerificacionForm.action = `/acciones/eliminar-verificacion/${verificacionId}/`;
        deleteVerificacionForm.submit();
      }
    }
  });
</script>
